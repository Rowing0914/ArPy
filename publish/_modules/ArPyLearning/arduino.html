
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ArPyLearning.arduino &#8212; src  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for ArPyLearning.arduino</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">serial</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="c1"># from serial.tools import list_ports</span>
<span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Windows&#39;</span><span class="p">:</span>
	<span class="kn">import</span> <span class="nn">_winreg</span> <span class="k">as</span> <span class="nn">winreg</span>
<span class="k">else</span><span class="p">:</span>
	<span class="kn">import</span> <span class="nn">glob</span>


<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="enumerate_serial_ports"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.enumerate_serial_ports">[docs]</a><span class="k">def</span> <span class="nf">enumerate_serial_ports</span><span class="p">():</span>
	<span class="sd">&quot;&quot;&quot; Uses the Win32 registry to return a iterator of serial </span>
<span class="sd">	(COM) ports existing on this computer.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;HARDWARE</span><span class="se">\\</span><span class="s1">DEVICEMAP</span><span class="se">\\</span><span class="s1">SERIALCOMM&#39;</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">key</span> <span class="o">=</span> <span class="n">winreg</span><span class="o">.</span><span class="n">OpenKey</span><span class="p">(</span><span class="n">winreg</span><span class="o">.</span><span class="n">HKEY_LOCAL_MACHINE</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">WindowsError</span><span class="p">:</span>
		<span class="k">raise</span> <span class="ne">Exception</span>
  
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">val</span> <span class="o">=</span> <span class="n">winreg</span><span class="o">.</span><span class="n">EnumValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
			<span class="k">yield</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
		<span class="k">except</span> <span class="ne">EnvironmentError</span><span class="p">:</span>
			<span class="k">break</span></div>


<div class="viewcode-block" id="build_cmd_str"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.build_cmd_str">[docs]</a><span class="k">def</span> <span class="nf">build_cmd_str</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot; Build a command string that can be sent to the arduino.</span>

<span class="sd">	:params cmd (str): the command to send to the arduino, must not contain a % character</span>
<span class="sd">	:params args (iterable): the arguments to send to the command</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">args</span><span class="p">:</span>
		<span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
	<span class="k">return</span> <span class="s2">&quot;@</span><span class="si">{cmd}</span><span class="s2">%</span><span class="si">{args}</span><span class="s2">$!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span></div>


<span class="c1"># def find_port(baud, timeout):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Find the first port that is connected to an arduino with a compatible</span>
<span class="c1">#     sketch installed.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     if platform.system() == &#39;Windows&#39;:</span>
<span class="c1">#         ports = enumerate_serial_ports()</span>
<span class="c1">#     elif platform.system() == &#39;Darwin&#39;:</span>
<span class="c1">#         ports = [i[0] for i in list_ports.comports()]</span>
<span class="c1">#     else:</span>
<span class="c1">#         ports = glob.glob(&quot;/dev/ttyUSB*&quot;) + glob.glob(&quot;/dev/ttyACM*&quot;)</span>
<span class="c1">#     for p in ports:</span>
<span class="c1">#         log.debug(&#39;Found {0}, testing...&#39;.format(p))</span>
<span class="c1">#         try:</span>
<span class="c1">#             sr = serial.Serial(p, baud, timeout=timeout)</span>
<span class="c1">#         except (serial.serialutil.SerialException, OSError) as e:</span>
<span class="c1">#             log.debug(str(e))</span>
<span class="c1">#             continue</span>
<span class="c1">#         time.sleep(2)</span>
<span class="c1">#         version = get_version(sr)</span>
<span class="c1">#         if version != &#39;version&#39;:</span>
<span class="c1">#             log.debug(&#39;Bad version {0}. This is not a Shrimp/Arduino!&#39;.format(</span>
<span class="c1">#                 version))</span>
<span class="c1">#             sr.close()</span>
<span class="c1">#             continue</span>
<span class="c1">#         log.info(&#39;Using port {0}.&#39;.format(p))</span>
<span class="c1">#         if sr:</span>
<span class="c1">#             return sr</span>
<span class="c1">#     return None</span>


<div class="viewcode-block" id="get_version"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.get_version">[docs]</a><span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="n">sr</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot; you can get the version of the Arduino</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">)</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
		<span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span>
	<span class="k">return</span> <span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Arduino"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino">[docs]</a><span class="k">class</span> <span class="nc">Arduino</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">baud</span><span class="o">=</span><span class="mi">9600</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initializes serial communication with Arduino if no connection is given. Attempts to self-select COM port, if not specified.</span>

<span class="sd">		:params baud: default 96000</span>
<span class="sd">		:params port: check the port from your Arduino IDE</span>
<span class="sd">		:params timeout: set the length of the session</span>
<span class="sd">		:params sr: port of the Arduino</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">sr</span><span class="p">:</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">port</span><span class="p">:</span>
				<span class="n">sr</span> <span class="o">=</span> <span class="n">find_port</span><span class="p">(</span><span class="n">baud</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="n">sr</span><span class="p">:</span>
					<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Could not find port.&quot;</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">sr</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">baud</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
		<span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span> <span class="o">=</span> <span class="n">sr</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">SoftwareSerial</span> <span class="o">=</span> <span class="n">SoftwareSerial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">Servos</span> <span class="o">=</span> <span class="n">Servos</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">EEPROM</span> <span class="o">=</span> <span class="n">EEPROM</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Arduino.version"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.version">[docs]</a>	<span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; check the version</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="n">get_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arduino.digitalWrite"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.digitalWrite">[docs]</a>	<span class="k">def</span> <span class="nf">digitalWrite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Sends digitalWrite command to digital pin on Arduino</span>

<span class="sd">		:params pin: digital pin number</span>
<span class="sd">		:params val: either &quot;HIGH&quot; or &quot;LOW&quot;</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;LOW&quot;</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="o">-</span><span class="n">pin</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="n">pin</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;dw&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin_</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span></div>

<div class="viewcode-block" id="Arduino.analogWrite"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.analogWrite">[docs]</a>	<span class="k">def</span> <span class="nf">analogWrite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Sends analogWrite pwm command to pin on Arduino</span>
<span class="sd">		</span>
<span class="sd">		:params pin: pin number</span>
<span class="sd">		:params val: integer 0 (off) to 255 (always on)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>
			<span class="n">val</span> <span class="o">=</span> <span class="mi">255</span>
		<span class="k">elif</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">val</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;aw&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span></div>

<div class="viewcode-block" id="Arduino.analogRead"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.analogRead">[docs]</a>	<span class="k">def</span> <span class="nf">analogRead</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the value of a specified analog pin.</span>

<span class="sd">		:params pin: analog pin number for measurement</span>
<span class="sd">		:rtype: value: integer from 1 to 1023</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;ar&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Arduino.pinMode"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.pinMode">[docs]</a>	<span class="k">def</span> <span class="nf">pinMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Sets I/O mode of pin</span>

<span class="sd">		:params pin: pin number to toggle</span>
<span class="sd">		:params val: &quot;:params&quot; or &quot;OUTPUT&quot;</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;:params&quot;</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="o">-</span><span class="n">pin</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="n">pin</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin_</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span></div>

<div class="viewcode-block" id="Arduino.pulseIn"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.pulseIn">[docs]</a>	<span class="k">def</span> <span class="nf">pulseIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Reads a pulse from a pin</span>

<span class="sd">		:params pin: pin number for pulse measurement</span>
<span class="sd">		:rtype: duration =&gt; pulse length measurement</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;LOW&quot;</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="o">-</span><span class="n">pin</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="n">pin</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;pi&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin_</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Arduino.pulseIn_set"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.pulseIn_set">[docs]</a>	<span class="k">def</span> <span class="nf">pulseIn_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">numTrials</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Sets a digital pin value, then reads the response</span>
<span class="sd">		as a pulse width.</span>
<span class="sd">		Useful for some ultrasonic rangefinders, etc.</span>

<span class="sd">		This method will automatically toggle</span>
<span class="sd">		I/O modes on the pin and precondition the</span>
<span class="sd">		measurment with a clean LOW/HIGH pulse.</span>
<span class="sd">		Arduino.pulseIn_set(pin,&quot;HIGH&quot;) is</span>
<span class="sd">		equivalent to the Arduino sketch code:</span>

<span class="sd">		pinMode(pin, OUTPUT);</span>
<span class="sd">		digitalWrite(pin, LOW);</span>
<span class="sd">		delayMicroseconds(2);</span>
<span class="sd">		digitalWrite(pin, HIGH);</span>
<span class="sd">		delayMicroseconds(5);</span>
<span class="sd">		digitalWrite(pin, LOW);</span>
<span class="sd">		pinMode(pin, :params);</span>
<span class="sd">		long duration = pulseIn(pin, HIGH);</span>

<span class="sd">		:params pin: pin number for pulse measurement</span>
<span class="sd">		:params val: &quot;HIGH&quot; or &quot;LOW&quot;. Pulse is measured when this state is detected</span>
<span class="sd">		:params numTrials: number of trials (for an average)</span>
<span class="sd">		:rtype: duration =&gt; an average of pulse length measurements</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;LOW&quot;</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="o">-</span><span class="n">pin</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">pin_</span> <span class="o">=</span> <span class="n">pin</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;ps&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin_</span><span class="p">,))</span>
		<span class="n">durations</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
			<span class="k">except</span><span class="p">:</span>
				<span class="k">pass</span>
			<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">rd</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
				<span class="k">if</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
					<span class="n">durations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">))</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">durations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">durations</span><span class="p">))</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">durations</span><span class="p">))</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">duration</span> <span class="o">=</span> <span class="kc">None</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Arduino.close"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.close">[docs]</a>	<span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; close the connection</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">isOpen</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="Arduino.digitalRead"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.digitalRead">[docs]</a>	<span class="k">def</span> <span class="nf">digitalRead</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the value of a specified digital pin.</span>

<span class="sd">		:params pin: digital pin number for measurement</span>
<span class="sd">		:rtype: value: 0 for &quot;LOW&quot;, 1 for &quot;HIGH&quot;</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;dr&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Arduino.Melody"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.Melody">[docs]</a>	<span class="k">def</span> <span class="nf">Melody</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">melody</span><span class="p">,</span> <span class="n">durations</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Plays a melody.</span>

<span class="sd">		:description:</span>
<span class="sd">		length of melody should be of same</span>
<span class="sd">		length as length of duration</span>

<span class="sd">		Melodies of the following length, can cause trouble</span>
<span class="sd">		when playing it multiple times.</span>
<span class="sd">			board.Melody(9,[&quot;C4&quot;,&quot;G3&quot;,&quot;G3&quot;,&quot;A3&quot;,&quot;G3&quot;,0,&quot;B3&quot;,&quot;C4&quot;],</span>
<span class="sd">												[4,8,8,4,4,4,4,4])</span>
<span class="sd">		Playing short melodies (1 or 2 tones) didn&#39;t cause</span>
<span class="sd">		trouble during testing</span>
<span class="sd">		</span>
<span class="sd">		:params pin: digital pin number for playback</span>
<span class="sd">		:params melody: list of tones</span>
<span class="sd">		:params durations: list of duration (4=quarter note, 8=eighth note, etc.)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">NOTES</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
			<span class="n">B0</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span> <span class="n">C1</span><span class="o">=</span><span class="mi">33</span><span class="p">,</span> <span class="n">CS1</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">D1</span><span class="o">=</span><span class="mi">37</span><span class="p">,</span> <span class="n">DS1</span><span class="o">=</span><span class="mi">39</span><span class="p">,</span> <span class="n">E1</span><span class="o">=</span><span class="mi">41</span><span class="p">,</span> <span class="n">F1</span><span class="o">=</span><span class="mi">44</span><span class="p">,</span> <span class="n">FS1</span><span class="o">=</span><span class="mi">46</span><span class="p">,</span> <span class="n">G1</span><span class="o">=</span><span class="mi">49</span><span class="p">,</span>
			<span class="n">GS1</span><span class="o">=</span><span class="mi">52</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">AS1</span><span class="o">=</span><span class="mi">58</span><span class="p">,</span> <span class="n">B1</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span> <span class="n">C2</span><span class="o">=</span><span class="mi">65</span><span class="p">,</span> <span class="n">CS2</span><span class="o">=</span><span class="mi">69</span><span class="p">,</span> <span class="n">D2</span><span class="o">=</span><span class="mi">73</span><span class="p">,</span> <span class="n">DS2</span><span class="o">=</span><span class="mi">78</span><span class="p">,</span> <span class="n">E2</span><span class="o">=</span><span class="mi">82</span><span class="p">,</span>
			<span class="n">F2</span><span class="o">=</span><span class="mi">87</span><span class="p">,</span> <span class="n">FS2</span><span class="o">=</span><span class="mi">93</span><span class="p">,</span> <span class="n">G2</span><span class="o">=</span><span class="mi">98</span><span class="p">,</span> <span class="n">GS2</span><span class="o">=</span><span class="mi">104</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">AS2</span><span class="o">=</span><span class="mi">117</span><span class="p">,</span> <span class="n">B2</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">C3</span><span class="o">=</span><span class="mi">131</span><span class="p">,</span>
			<span class="n">CS3</span><span class="o">=</span><span class="mi">139</span><span class="p">,</span> <span class="n">D3</span><span class="o">=</span><span class="mi">147</span><span class="p">,</span> <span class="n">DS3</span><span class="o">=</span><span class="mi">156</span><span class="p">,</span> <span class="n">E3</span><span class="o">=</span><span class="mi">165</span><span class="p">,</span> <span class="n">F3</span><span class="o">=</span><span class="mi">175</span><span class="p">,</span> <span class="n">FS3</span><span class="o">=</span><span class="mi">185</span><span class="p">,</span> <span class="n">G3</span><span class="o">=</span><span class="mi">196</span><span class="p">,</span> <span class="n">GS3</span><span class="o">=</span><span class="mi">208</span><span class="p">,</span>
			<span class="n">A3</span><span class="o">=</span><span class="mi">220</span><span class="p">,</span> <span class="n">AS3</span><span class="o">=</span><span class="mi">233</span><span class="p">,</span> <span class="n">B3</span><span class="o">=</span><span class="mi">247</span><span class="p">,</span> <span class="n">C4</span><span class="o">=</span><span class="mi">262</span><span class="p">,</span> <span class="n">CS4</span><span class="o">=</span><span class="mi">277</span><span class="p">,</span> <span class="n">D4</span><span class="o">=</span><span class="mi">294</span><span class="p">,</span> <span class="n">DS4</span><span class="o">=</span><span class="mi">311</span><span class="p">,</span> <span class="n">E4</span><span class="o">=</span><span class="mi">330</span><span class="p">,</span>
			<span class="n">F4</span><span class="o">=</span><span class="mi">349</span><span class="p">,</span> <span class="n">FS4</span><span class="o">=</span><span class="mi">370</span><span class="p">,</span> <span class="n">G4</span><span class="o">=</span><span class="mi">392</span><span class="p">,</span> <span class="n">GS4</span><span class="o">=</span><span class="mi">415</span><span class="p">,</span> <span class="n">A4</span><span class="o">=</span><span class="mi">440</span><span class="p">,</span>
			<span class="n">AS4</span><span class="o">=</span><span class="mi">466</span><span class="p">,</span> <span class="n">B4</span><span class="o">=</span><span class="mi">494</span><span class="p">,</span> <span class="n">C5</span><span class="o">=</span><span class="mi">523</span><span class="p">,</span> <span class="n">CS5</span><span class="o">=</span><span class="mi">554</span><span class="p">,</span> <span class="n">D5</span><span class="o">=</span><span class="mi">587</span><span class="p">,</span> <span class="n">DS5</span><span class="o">=</span><span class="mi">622</span><span class="p">,</span> <span class="n">E5</span><span class="o">=</span><span class="mi">659</span><span class="p">,</span> <span class="n">F5</span><span class="o">=</span><span class="mi">698</span><span class="p">,</span>
			<span class="n">FS5</span><span class="o">=</span><span class="mi">740</span><span class="p">,</span> <span class="n">G5</span><span class="o">=</span><span class="mi">784</span><span class="p">,</span> <span class="n">GS5</span><span class="o">=</span><span class="mi">831</span><span class="p">,</span> <span class="n">A5</span><span class="o">=</span><span class="mi">880</span><span class="p">,</span> <span class="n">AS5</span><span class="o">=</span><span class="mi">932</span><span class="p">,</span> <span class="n">B5</span><span class="o">=</span><span class="mi">988</span><span class="p">,</span> <span class="n">C6</span><span class="o">=</span><span class="mi">1047</span><span class="p">,</span>
			<span class="n">CS6</span><span class="o">=</span><span class="mi">1109</span><span class="p">,</span> <span class="n">D6</span><span class="o">=</span><span class="mi">1175</span><span class="p">,</span> <span class="n">DS6</span><span class="o">=</span><span class="mi">1245</span><span class="p">,</span> <span class="n">E6</span><span class="o">=</span><span class="mi">1319</span><span class="p">,</span> <span class="n">F6</span><span class="o">=</span><span class="mi">1397</span><span class="p">,</span> <span class="n">FS6</span><span class="o">=</span><span class="mi">1480</span><span class="p">,</span> <span class="n">G6</span><span class="o">=</span><span class="mi">1568</span><span class="p">,</span>
			<span class="n">GS6</span><span class="o">=</span><span class="mi">1661</span><span class="p">,</span> <span class="n">A6</span><span class="o">=</span><span class="mi">1760</span><span class="p">,</span> <span class="n">AS6</span><span class="o">=</span><span class="mi">1865</span><span class="p">,</span> <span class="n">B6</span><span class="o">=</span><span class="mi">1976</span><span class="p">,</span> <span class="n">C7</span><span class="o">=</span><span class="mi">2093</span><span class="p">,</span> <span class="n">CS7</span><span class="o">=</span><span class="mi">2217</span><span class="p">,</span> <span class="n">D7</span><span class="o">=</span><span class="mi">2349</span><span class="p">,</span>
			<span class="n">DS7</span><span class="o">=</span><span class="mi">2489</span><span class="p">,</span> <span class="n">E7</span><span class="o">=</span><span class="mi">2637</span><span class="p">,</span> <span class="n">F7</span><span class="o">=</span><span class="mi">2794</span><span class="p">,</span> <span class="n">FS7</span><span class="o">=</span><span class="mi">2960</span><span class="p">,</span> <span class="n">G7</span><span class="o">=</span><span class="mi">3136</span><span class="p">,</span> <span class="n">GS7</span><span class="o">=</span><span class="mi">3322</span><span class="p">,</span> <span class="n">A7</span><span class="o">=</span><span class="mi">3520</span><span class="p">,</span>
			<span class="n">AS7</span><span class="o">=</span><span class="mi">3729</span><span class="p">,</span> <span class="n">B7</span><span class="o">=</span><span class="mi">3951</span><span class="p">,</span> <span class="n">C8</span><span class="o">=</span><span class="mi">4186</span><span class="p">,</span> <span class="n">CS8</span><span class="o">=</span><span class="mi">4435</span><span class="p">,</span> <span class="n">D8</span><span class="o">=</span><span class="mi">4699</span><span class="p">,</span> <span class="n">DS8</span><span class="o">=</span><span class="mi">4978</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">melody</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">durations</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
			<span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">melody</span><span class="p">)</span>
			<span class="n">cmd_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">length</span><span class="p">,</span> <span class="n">pin</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">durations</span><span class="p">):</span>
				<span class="n">cmd_args</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">NOTES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">melody</span><span class="p">[</span><span class="n">note</span><span class="p">])</span>
								<span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">)])</span>
				<span class="n">cmd_args</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">durations</span><span class="p">[</span><span class="n">duration</span><span class="p">]</span>
								<span class="k">for</span> <span class="n">duration</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">durations</span><span class="p">))])</span>
				<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;to&quot;</span><span class="p">,</span> <span class="n">cmd_args</span><span class="p">)</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
				<span class="k">except</span><span class="p">:</span>
					<span class="k">pass</span>
				<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;nto&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">pin</span><span class="p">])</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
				<span class="k">except</span><span class="p">:</span>
					<span class="k">pass</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Arduino.capacitivePin"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.capacitivePin">[docs]</a>	<span class="k">def</span> <span class="nf">capacitivePin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">		:description:</span>
<span class="sd">		Use it in a loop!</span>
<span class="sd">		DO NOT CONNECT ANY ACTIVE DRIVER TO THE USED PIN !</span>

<span class="sd">		the pin is toggled to output mode to discharge the port,</span>
<span class="sd">		and if connected to a voltage source,</span>
<span class="sd">		will short circuit the pin, potentially damaging</span>
<span class="sd">		the Arduino/Shrimp and any hardware attached to the pin.</span>

<span class="sd">		:params pin (int): pin to use as capacitive sensor</span>
<span class="sd">		&#39;&#39;&#39;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;cap&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin</span><span class="p">,))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
		<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">rd</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
			<span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arduino.shiftOut"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.shiftOut">[docs]</a>	<span class="k">def</span> <span class="nf">shiftOut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataPin</span><span class="p">,</span> <span class="n">clockPin</span><span class="p">,</span> <span class="n">pinOrder</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Shift a byte out on the datapin using Arduino&#39;s shiftOut()</span>

<span class="sd">		:params dataPin (int): pin for data</span>
<span class="sd">		:params clockPin (int): pin for clock</span>
<span class="sd">		:params pinOrder (String): either &#39;MSBFIRST&#39; or &#39;LSBFIRST&#39;</span>
<span class="sd">		:params value (int): an integer from 0 and 255</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;so&quot;</span><span class="p">,</span>
							   <span class="p">(</span><span class="n">dataPin</span><span class="p">,</span> <span class="n">clockPin</span><span class="p">,</span> <span class="n">pinOrder</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span></div>

<div class="viewcode-block" id="Arduino.shiftIn"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Arduino.shiftIn">[docs]</a>	<span class="k">def</span> <span class="nf">shiftIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataPin</span><span class="p">,</span> <span class="n">clockPin</span><span class="p">,</span> <span class="n">pinOrder</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Shift a byte in from the datapin using Arduino&#39;s shiftIn().</span>

<span class="sd">		:params dataPin (int): pin for data</span>
<span class="sd">		:params clockPin (int): pin for clock</span>
<span class="sd">		:params pinOrder (String): either &#39;MSBFIRST&#39; or &#39;LSBFIRST&#39;</span>
<span class="sd">		:rtype: (int) an integer from 0 to 255</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;si&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">dataPin</span><span class="p">,</span> <span class="n">clockPin</span><span class="p">,</span> <span class="n">pinOrder</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">rd</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
			<span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Shrimp"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Shrimp">[docs]</a><span class="k">class</span> <span class="nc">Shrimp</span><span class="p">(</span><span class="n">Arduino</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">Arduino</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Wires"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Wires">[docs]</a><span class="k">class</span> <span class="nc">Wires</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Class for Arduino wire (i2c) support</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="n">board</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">sr</span></div>


<div class="viewcode-block" id="Servos"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Servos">[docs]</a><span class="k">class</span> <span class="nc">Servos</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Class for Arduino servo support </span>

<span class="sd">	:Warning: 0.03 second delay noted</span>
<span class="sd">	:Link: official docs is here http://forum.arduino.cc/index.php?topic=169501.0</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; init func</span>

<span class="sd">		:params board: board info</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="n">board</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">sr</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="Servos.attach"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Servos.attach">[docs]</a>	<span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">544</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2400</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; attach the servo to the specific pin of Arduino</span>

<span class="sd">		:params pin: digital pin number for Servo</span>
<span class="sd">		:params min: the lower band of the servo, normally 544</span>
<span class="sd">		:params max: the upper band of the servo, normally 2400</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;sva&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">))</span>

		<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

			<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">rd</span><span class="p">:</span>
				<span class="k">break</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;trying to attach servo to pin </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span>
		<span class="n">position</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
		<span class="k">return</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Servos.detach"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Servos.detach">[docs]</a>	<span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">sleep_time</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; remove the servo from the specific pin of Arduino</span>

<span class="sd">		:params pin: digital pin number for Servo</span>
<span class="sd">		:params sleep_time: the lower band of the servo, normally 544</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># We have to give a time your Arduino to fetch the command!</span>
		<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep_time</span><span class="p">)</span>
		<span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;svd&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">position</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span></div>

<div class="viewcode-block" id="Servos.write"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Servos.write">[docs]</a>	<span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; write/send the signal to the pin of Servo</span>

<span class="sd">		:params pin: digital pin number for Servo</span>
<span class="sd">		:params angle: the degree to move</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;svw&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">angle</span><span class="p">))</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span></div>

<div class="viewcode-block" id="Servos.writeMicroseconds"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Servos.writeMicroseconds">[docs]</a>	<span class="k">def</span> <span class="nf">writeMicroseconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">uS</span><span class="p">):</span>
		<span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;svwm&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">uS</span><span class="p">))</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span></div>

<div class="viewcode-block" id="Servos.read"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.Servos.read">[docs]</a>	<span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; you can read the signal/angle from Servo</span>

<span class="sd">		:params pin: digital pin number for Servo</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">pin</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
		<span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servo_pos</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;svr&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">position</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">angle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">angle</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span></div></div>


<div class="viewcode-block" id="SoftwareSerial"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.SoftwareSerial">[docs]</a><span class="k">class</span> <span class="nc">SoftwareSerial</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Class for Arduino software serial functionality</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="n">board</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">sr</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="SoftwareSerial.begin"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.SoftwareSerial.begin">[docs]</a>	<span class="k">def</span> <span class="nf">begin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">baud</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create software serial instance on specified tx,rx pins, at specified baud</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">baud</span><span class="p">))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;ss OK&quot;</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="k">return</span> <span class="kc">True</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
			<span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="SoftwareSerial.write"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.SoftwareSerial.write">[docs]</a>	<span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		sends data to existing software serial instance using Arduino&#39;s &#39;write&#39; function</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
			<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;sw&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">data</span><span class="p">,))</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
			<span class="k">except</span><span class="p">:</span>
				<span class="k">pass</span>
			<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;ss OK&quot;</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">True</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="SoftwareSerial.read"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.SoftwareSerial.read">[docs]</a>	<span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		:rtype: first character read from existing software serial instance</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
			<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;sr&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
			<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">response</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">response</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="EEPROM"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.EEPROM">[docs]</a><span class="k">class</span> <span class="nc">EEPROM</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Class for reading and writing to EEPROM. </span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="n">board</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sr</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">sr</span>

<div class="viewcode-block" id="EEPROM.size"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.EEPROM.size">[docs]</a>	<span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		:rtype: size of EEPROM memory.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;sz&quot;</span><span class="p">)</span>
   
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
			<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="mi">0</span></div>
		
<div class="viewcode-block" id="EEPROM.write"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.EEPROM.write">[docs]</a>	<span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; Write a byte to the EEPROM.</span>
<span class="sd">			</span>
<span class="sd">		:params address: the location to write to, starting from 0 (int)</span>
<span class="sd">		:params value: the value to write, from 0 to 255 (byte)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		
		<span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="mi">255</span>
		<span class="k">elif</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;eewr&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span></div>
	
<div class="viewcode-block" id="EEPROM.read"><a class="viewcode-back" href="../../ArPyLearning.html#ArPyLearning.arduino.EEPROM.read">[docs]</a>	<span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adrress</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot; Reads a byte from the EEPROM.</span>
<span class="sd">		</span>
<span class="sd">		:params address: the location to write to, starting from 0 (int)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cmd_str</span> <span class="o">=</span> <span class="n">build_cmd_str</span><span class="p">(</span><span class="s2">&quot;eer&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">adrress</span><span class="p">,))</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_str</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>            
			<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">response</span><span class="p">:</span>
				<span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">return</span> <span class="mi">0</span></div></div>
								
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>